fury layer init
fury project add -n scala
fury module add -n compiler -t compiler
fury module update -C scala-lang.org:scala-compiler:2.12.8
fury binary add -b org.scala-lang:scala-compiler:2.12.8
fury project add -n cache-test
fury module add -n my-module -c scala/compiler
fury permission require -C java.util.PropertyPermission -T test.property -A read
fury permission require -C java.lang.RuntimePermission -T getenv.TEST1
fury permission require -C java.io.FilePermission -T '.content' -A write
mkdir -p src/libA
fury source add -s src/libA
echo 'package libA; object LibA { val aVal = "A" }' > src/libA/liba.scala
mkdir libB
fury source add -s libB
echo 'object LibB { val bVal = "B" }' >> libB/libb.scala
fury build run -f out --output quiet
jar -tf out/cache-test-my-module.jar | LC_ALL=A sort --ignore-case
fury source remove -s libB
fury build run -f out --output quiet
jar -tf out/cache-test-my-module.jar | LC_ALL=A sort --ignore-case
echo $?
